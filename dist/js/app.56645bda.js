(function(){"use strict";var t={9e3:function(t,e,l){var o=l(8935),i=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{attrs:{id:"app"}},[l("el-select",{staticStyle:{width:"100px"},model:{value:t.fixed,callback:function(e){t.fixed=e},expression:"fixed"}},[l("el-option",{attrs:{value:void 0,label:"不固定"}}),l("el-option",{attrs:{value:"left",label:"固定左边"}}),l("el-option",{attrs:{value:"right",label:"固定右边"}})],1),t._v("   "),l("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"滚动到第几行"},model:{value:t.jumpIndex,callback:function(e){t.jumpIndex=e},expression:"jumpIndex"}},[l("el-button",{attrs:{slot:"append"},on:{click:function(e){return t.scrollToRow(t.jumpIndex)}},slot:"append"},[t._v("滚动")])],1),t._v("   数据总数量："),l("el-input",{staticStyle:{width:"200px"},attrs:{type:"number",placeholder:"数据条数"},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}}),l("VirtualScroll",{ref:"virtualScroll",attrs:{data:t.list,height:62,"key-prop":"id"},on:{change:t.onChange}},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.virtualList1,stripe:"","row-key":"id",height:"500px"}},[l("el-table-column",{attrs:{label:"id",prop:"id"}}),l("el-table-column",{attrs:{label:"内容",width:"260",prop:"text"}}),l("el-table-column",{attrs:{label:"内容省略",width:"260",prop:"text","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{label:"详情","min-width":"260"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[l("el-button",{attrs:{type:"text"},on:{click:function(t){o.show=!o.show}}},[t._v(t._s(o.show?"隐藏":"显示"))]),o.show?l("div",[t._v(t._s(o.text2))]):t._e()]}}])}),l("el-table-column",{attrs:{label:"一级表头"}},[l("el-table-column",{attrs:{label:"第n行",width:"400",prop:"id"}}),l("el-table-column",{attrs:{label:"第n行",width:"400",prop:"id"}}),l("el-table-column",{attrs:{label:"第n行",width:"400",prop:"id"}})],1),l("el-table-column",{attrs:{label:"操作",fixed:t.fixed,width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v(" "+t._s(o.id)+" "),l("el-button",{on:{click:function(e){return t.onDel(o)}}},[t._v("删除")]),l("el-button",{on:{click:function(e){return t.onEdit(o)}}},[t._v("编辑")])]}}])}),l("div",{attrs:{slot:"append"},slot:"append"},[l("el-divider",[t._v("到底了")])],1)],1)],1),l("b",[t._v("行数: "+t._s(t.virtualList1.length))]),l("h2",[t._v("不定列宽度，下拉加载")]),l("VirtualScroll",{attrs:{data:t.list2,height:62,"key-prop":"id"},on:{change:function(e){return t.virtualList2=e}}},[l("el-table",{staticClass:"table2",attrs:{"row-key":"id",stripe:"",data:t.virtualList2,height:"500px"}},[l("el-table-column",{attrs:{label:"id",prop:"id"}}),l("el-table-column",{attrs:{label:"内容",prop:"text"}}),l("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[l("el-button",{attrs:{type:"text"},on:{click:function(t){o.show=!o.show}}},[t._v(t._s(o.show?"隐藏":"显示"))]),o.show?l("div",[t._v(t._s(o.text2))]):t._e()]}}])}),l("el-table-column",{attrs:{label:"第n行",prop:"id"}}),l("el-table-column",{attrs:{label:"第n行",prop:"id"}}),l("el-table-column",{attrs:{label:"第n行",prop:"id"}}),l("el-table-column",{attrs:{label:"第n行",prop:"id"}}),l("el-table-column",{attrs:{label:"第n行",prop:"id"}}),l("el-table-column",{attrs:{label:"操作",width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v(" "+t._s(o.id)+" "),l("el-button",{on:{click:function(e){return t.onDel2(o)}}},[t._v("删除")]),l("el-button",{on:{click:function(e){return t.onEdit2(o)}}},[t._v("编辑")])]}}])}),l("div",{attrs:{slot:"append"},slot:"append"},[l("InfiniteLoading",{attrs:{forceUseInfiniteWrapper:".table2 .el-table__body-wrapper"},on:{infinite:t.loadMore}})],1)],1)],1),l("b",[t._v("行数: "+t._s(t.virtualList2.length))]),l("h2",[t._v("不使用虚拟滚动的表格效果（数据大时会卡顿）")]),t._v(" 开启："),l("el-switch",{model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),t.show?l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.list,height:"500px"}},[l("el-table-column",{attrs:{label:"id",prop:"id"}}),l("el-table-column",{attrs:{label:"内容",width:"260",prop:"text"}}),l("el-table-column",{attrs:{label:"内容省略",width:"260",prop:"text","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{label:"详情","min-width":"260"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[l("el-button",{attrs:{type:"text"},on:{click:function(t){o.show=!o.show}}},[t._v(t._s(o.show?"隐藏":"显示"))]),o.show?l("div",[t._v(t._s(o.text2))]):t._e()]}}],null,!1,230167116)}),l("el-table-column",{attrs:{label:"一级表头"}},[l("el-table-column",{attrs:{label:"第n行",width:"400",prop:"id"}}),l("el-table-column",{attrs:{label:"第n行",width:"400",prop:"id"}}),l("el-table-column",{attrs:{label:"第n行",width:"400",prop:"id"}})],1),l("el-table-column",{attrs:{label:"操作",fixed:t.fixed,width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.row;return[t._v(" "+t._s(o.id)+" "),l("el-button",{key:o.id,on:{click:function(e){return t.onDel(o)}}},[t._v("删除")]),l("el-button",{key:o.id,on:{click:function(e){return t.onEdit(o)}}},[t._v("编辑")])]}}],null,!1,1374602272)}),l("el-divider",{attrs:{slot:"append"},slot:"append"},[t._v("到底了")])],1):t._e(),l("br"),l("b",[t._v("行数: "+t._s(t.list.length))])],1)},n=[],r=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",[t._t("default")],2)},s=[],a=l(4074),c=l.n(a),u={name:"el-table-virtual-scroll",props:{data:{type:Array,required:!0},height:{type:Number,default:60},buffer:{type:Number,default:500},keyProp:{type:String,default:"id"},throttleTime:{type:Number,default:100}},data(){return{sizes:{}}},computed:{offsetMap({keyProp:t,height:e,sizes:l,data:o}){const i={};let n=0;for(let r=0;r<o.length;r++){const s=o[r][t];i[s]=n;const a=l[s],c="number"===typeof a?a:e;n+=c}return i}},methods:{initData(){this.renderData=[],this.top=void 0,this.bottom=void 0,this.start=0,this.end=void 0,this.scroller=this.$el.querySelector(".el-table__body-wrapper"),setTimeout((()=>{this.handleScroll()}),100),this.onScroll=c()(this.handleScroll,this.throttleTime),this.scroller.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.onScroll)},updateSizes(){const t=this.$el.querySelectorAll(".el-table__body > tbody > .el-table__row");Array.from(t).forEach(((t,e)=>{const l=this.renderData[e];if(!l)return;const o=l[this.keyProp],i=t.offsetHeight;this.sizes[o]!==i&&this.$set(this.sizes,o,i)}))},handleScroll(t=!0){this.updateSizes(),this.calcRenderData(),this.calcPosition(),t&&this.updatePosition(),this.$emit("change",this.renderData,this.start,this.end)},getOffsetTop(t){const e=this.data[t];return e&&this.offsetMap[e[this.keyProp]]||0},getSize(t){const e=this.data[t];if(e){const t=e[this.keyProp];return this.sizes[t]||this.height}return this.height},calcRenderData(){const{scroller:t,data:e,buffer:l}=this,o=t.scrollTop-l,i=t.scrollTop+t.offsetHeight+l;let n=0,r=e.length-1,s=0;while(n<=r){s=Math.floor((n+r)/2);const t=this.getOffsetTop(s);if(t<o){const t=this.getOffsetTop(s+1);if(t>o)break;n=s+1}else r=s-1}let a=s,c=e.length-1;for(let u=a+1;u<e.length;u++){const t=this.getOffsetTop(u);if(t>=i){c=u;break}}a%2&&(a-=1),this.top=o,this.bottom=i,this.start=a,this.end=c,this.renderData=e.slice(a,c+1)},calcPosition(){const t=this.data.length-1,e=this.getOffsetTop(t)+this.getSize(t),l=this.getOffsetTop(this.start),o=[".el-table__body-wrapper",".el-table__fixed-right .el-table__fixed-body-wrapper",".el-table__fixed .el-table__fixed-body-wrapper"];o.forEach((t=>{const o=this.$el.querySelector(t);if(o){if(!o.wrapEl){const t=document.createElement("div"),e=document.createElement("div");t.appendChild(e),e.appendChild(o.children[0]),o.insertBefore(t,o.firstChild),o.wrapEl=t,o.innerEl=e}o.wrapEl&&(o.wrapEl.style.height=e+"px",o.innerEl.style.transform=`translateY(${l}px)`)}}))},updatePosition(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{this.timer&&clearTimeout(this.timer),this.handleScroll(!1)}),this.throttleTime+10)},update(){console.log("update"),this.handleScroll()},scrollTo(t,e=!1){const l=this.data[t];l&&this.scroller&&(this.updateSizes(),this.calcRenderData(),this.$nextTick((()=>{const l=this.getOffsetTop(t);this.scroller.scrollTop=l,e||setTimeout((()=>{this.scrollTo(t,!0)}),50)})))},reset(){this.sizes={},this.scrollTo(0,!1)}},watch:{data(){this.update()}},created(){this.$nextTick((()=>{this.initData()}))},beforeDestroy(){this.scroller&&(this.scroller.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onScroll))}},d=u,h=l(1001),p=(0,h.Z)(d,r,s,!1,null,"39ceb21c",null),f=p.exports,b=l(1774),v=l.n(b),m={name:"App",components:{VirtualScroll:f,InfiniteLoading:v()},data(){return{count:2e3,count2:0,fixed:void 0,jumpIndex:1999,loading:!1,show:!1,list:[],list2:[],virtualList1:[],virtualList2:[]}},methods:{fetchData(){this.loading=!0,this.list=[],setTimeout((()=>{this.list=[],this.$refs.virtualScroll.reset();for(let t=0;t<this.count;t++){const e=this.getRandomContent(),l=this.getRandomContent();this.list.push({id:t,show:!1,text:e,text2:l})}this.loading=!1}),1e3)},getRandomContent(){const t=["这是一条测试数据","君不见黄河之水天上来，奔流到海不复回。","十年生死两茫茫","寻寻觅觅，冷冷清清，凄凄惨惨戚戚。","桃花坞里桃花庵，桃花庵里桃花仙；桃花仙人种桃树，又摘桃花卖酒钱。","明月几时有，把酒问青天。","槛菊愁烟兰泣露，罗幕轻寒，","寒蝉凄切，对长亭晚，骤雨初歇。都门帐饮无绪，留恋处，兰舟催发。执手相看泪眼，竟无语凝噎。念去去，千里烟波，暮霭沉沉楚天阔。多情自古伤离别，更那堪冷落清秋节！今宵酒醒何处？杨柳岸，晓风残月。此去经年，应是良辰好景虚设。便纵有千种风情，更与何人说？","红豆生南国，春来发几枝。","黄鹂"],e=Math.floor(10*Math.random());return t[e]},onChange(t){console.log("onChange"),this.virtualList1=t},onDel(t){const e=this.list.findIndex((e=>e===t));e>-1&&this.list.splice(e,1)},onEdit(t){t.text=t.text+"__编辑"},onDel2(t){const e=this.list2.findIndex((e=>e===t));e>-1&&this.list2.splice(e,1)},scrollToRow(t){this.$refs.virtualScroll.scrollTo(t)},loadMore(t){setTimeout((()=>{for(let t=0;t<10;t++)this.count2++,this.list2.push({id:this.count2,show:!1,text:this.getRandomContent(),text2:this.getRandomContent()});t&&t.loaded()}),1e3)}},watch:{count(){this.fetchData()}},created(){this.fetchData()}},_=m,w=(0,h.Z)(_,i,n,!1,null,null,null),g=w.exports,y=l(4549),x=l.n(y);o["default"].config.productionTip=!1,o["default"].use(x()),new o["default"]({render:t=>t(g)}).$mount("#app")}},e={};function l(o){var i=e[o];if(void 0!==i)return i.exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,l),n.exports}l.m=t,function(){var t=[];l.O=function(e,o,i,n){if(!o){var r=1/0;for(u=0;u<t.length;u++){o=t[u][0],i=t[u][1],n=t[u][2];for(var s=!0,a=0;a<o.length;a++)(!1&n||r>=n)&&Object.keys(l.O).every((function(t){return l.O[t](o[a])}))?o.splice(a--,1):(s=!1,n<r&&(r=n));if(s){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[o,i,n]}}(),function(){l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,{a:e}),e}}(),function(){l.d=function(t,e){for(var o in e)l.o(e,o)&&!l.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};l.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,n,r=o[0],s=o[1],a=o[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in s)l.o(s,i)&&(l.m[i]=s[i]);if(a)var u=a(l)}for(e&&e(o);c<r.length;c++)n=r[c],l.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return l.O(u)},o=self["webpackChunkel_table_virtual_scroll"]=self["webpackChunkel_table_virtual_scroll"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=l.O(void 0,[998],(function(){return l(9e3)}));o=l.O(o)})();
//# sourceMappingURL=app.56645bda.js.map